import { useState } from "react";
import Layout from "../components/Layout/Layout";
import PaymentTable from "../components/Payment/PaymentTable";
import AddPaymentModal from "../components/Payment/AddPaymentModal";
import { initialPayments } from "../Data/dummyData";
import { exportCSV } from "../utils/exportCSV";
import { AiOutlineCloudUpload } from "react-icons/ai";
import { FaPlus } from "react-icons/fa6";

const Payment = () => {
  const [payments, setPayments] = useState(initialPayments);
  const [open, setOpen] = useState(false);

  return (
    <Layout>
      <main className=" flex flex-col gap-5">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-[24px]  font-poppins font-semibold">Payment</h2>

          <div className="flex gap-2">
            <button
              onClick={() => exportCSV(payments)}
              className="border px-6 py-1 rounded text-[14px] font-semibold tracking-wider flex justify-center items-center gap-3"
            >
              <AiOutlineCloudUpload className="text-[22px]" />
              Export CSV
            </button>

            <button
              onClick={() => setOpen(true)}
              className="bg-[#00B386] text-white px-4 py-2 rounded text-[14px] font-semibold tracking-wider flex justify-center items-center gap-3"
            >
              <FaPlus className="text-[18px]" />
              Add Payment
            </button>
          </div>
        </div>

        <PaymentTable data={payments} />

        {open && (
          <AddPaymentModal
            onClose={() => setOpen(false)}
            onAdd={(item) => setPayments([...payments, item])}
          />
        )}
      </main>
    </Layout>
  );
};

export default Payment;
